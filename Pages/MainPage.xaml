<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="QuickPrompt.Pages.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    xmlns:views="clr-namespace:QuickPrompt.Views"
    BackgroundColor="WhiteSmoke"
    Shell.PresentationMode="Animated">

    <Shell.TitleView>

        <Label
            FontFamily="Designer"
            FontSize="18"
            Text="Create"
            TextColor="{StaticResource PrimaryBlueDark}"
            VerticalOptions="Center" />
    </Shell.TitleView>

    <!--  Barra de herramientas  -->
    <ContentPage.ToolbarItems>
        <!--  Botón de Guardar  -->
        <ToolbarItem Command="{Binding SavePromptCommand}" IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}">
            <ToolbarItem.IconImageSource>
                <FontImageSource
                    FontFamily="MaterialIconsOutlined-Regular"
                    Glyph="&#xe86c;"
                    Color="{StaticResource PrimaryBlueDark}" />
            </ToolbarItem.IconImageSource>
            <ToolTipProperties.Text>
                Click to Save data
            </ToolTipProperties.Text>
        </ToolbarItem>

        <!--  Botón de Crear Variable  -->
        <ToolbarItem Command="{Binding CreateVariableCommand}" IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}">
            <ToolbarItem.IconImageSource>
                <FontImageSource
                    FontFamily="MaterialIconsOutlined-Regular"
                    Glyph="&#xe86f;"
                    Color="{StaticResource PrimaryBlueDark}" />
            </ToolbarItem.IconImageSource>
            <ToolTipProperties.Text>
                Click to Create a Variable
            </ToolTipProperties.Text>
        </ToolbarItem>

        <!--  Botón de Copiar  -->
        <ToolbarItem Command="{Binding CopyToClipboardCommand}" IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}">
            <ToolbarItem.IconImageSource>
                <FontImageSource
                    FontFamily="MaterialIconsOutlined-Regular"
                    Glyph="&#xe14d;"
                    Color="{StaticResource PrimaryBlueDark}" />
                <!--  Color asociado al botón Copiar  -->
            </ToolbarItem.IconImageSource>
            <ToolTipProperties.Text>
                Click to Clear Text
            </ToolTipProperties.Text>
        </ToolbarItem>

        <!--  Botón de Copiar  -->
        <ToolbarItem Command="{Binding ClearTextCommand}" IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}">
            <ToolbarItem.IconImageSource>
                <FontImageSource
                    FontFamily="MaterialIconsOutlined-Regular"
                    Glyph="&#xe5c9;"
                    Color="{StaticResource PrimaryRed}" />
                <!--  Color asociado al botón Copiar  -->
            </ToolbarItem.IconImageSource>
            <ToolTipProperties.Text>
                Click to Clear Text
            </ToolTipProperties.Text>
        </ToolbarItem>
    </ContentPage.ToolbarItems>

    <ScrollView>

        <Grid
            Padding="20"
            RowDefinitions="Auto,Auto,Auto,Auto,Auto"
            RowSpacing="10">

            <!--  Overlay de carga  -->
            <views:ReusableLoadingOverlay
                x:Name="LoadingOverlay"
                Grid.Row="0"
                Grid.RowSpan="5"
                IsVisible="{Binding IsLoading}"
                Message="Loading..." />

            <!--  Título  -->
            <Label
                Grid.Row="0"
                Style="{StaticResource TitleLabelStyle}"
                Text="Prompt Management" />

            <!--  Línea divisoria  -->
            <BoxView Grid.Row="1" Style="{StaticResource DividerLineStyle}" />

            <!--  Entrada para el Título  -->
            <Border Grid.Row="2" Style="{StaticResource InputBorderStyle}">
                <Entry
                    IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}"
                    Placeholder="Type Title..."
                    Style="{StaticResource InputEntryStyle}"
                    Text="{Binding PromptTitle}" />
            </Border>

            <!--  Entrada para la Descripción  -->
            <Border Grid.Row="3" Style="{StaticResource InputBorderStyle}">
                <Editor
                    IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}"
                    Style="{StaticResource InputEditorStyle}"
                    Text="{Binding PromptDescription}" />
            </Border>

            <!--  Editor para el Prompt  -->
            <Border Grid.Row="4" Style="{StaticResource InputBorderStyle}">
                <Editor
                    CursorPosition="{Binding CursorPosition, Mode=TwoWay}"
                    IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}"
                    SelectionLength="{Binding SelectionLength, Mode=TwoWay}"
                    Style="{StaticResource PromptEditorStyle}"
                    Text="{Binding PromptText}" />
            </Border>
        </Grid>
    </ScrollView>
</ContentPage>